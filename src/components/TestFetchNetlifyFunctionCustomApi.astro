---
import {parseHTML} from 'linkedom';

// const titreUne =  await fetch("https://my-butler.netlify.app/.netlify/functions/fetch-title-api")
//   .then((response) => {
//     return response.json();
//   })
//   .then((htmlText) => {
//     console.log("üê†", htmlText);
//     const {document} = parseHTML(htmlText);
//     // You can now even select part of that html as you would in the regular DOM
//     console.log("üê†üê†", document);
//     const titreUne = document.querySelector("h2")?.textContent;
//     console.log("üê†üê†üê†", titreUne);
//   })
//   .catch((error) => console.error(error));

---

<section>
  <h1>Test Fetch Custom Fetch Api on Netlify functions</h1>
  <p>Titre de la une de Lib√© : <span id="libe-title"></span></p>
</section>

<script>
  import { getTitleFromLiberationPage } from "../scripts/parseApiWebpage";
  const titleLibe = await getTitleFromLiberationPage();
  const titlePlacehoder = document.getElementById("libe-title");
  if(titlePlacehoder && titleLibe) {
    titlePlacehoder.textContent = titleLibe;
  }
</script>